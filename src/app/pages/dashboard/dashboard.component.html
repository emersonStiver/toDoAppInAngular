<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <app-header
    (searchChange)="onSearchChange($event)"
    (createTaskClick)="onCreateTaskClick()"
  ></app-header>

  <div class="container mx-auto px-4 py-8">
    <!-- Filtros y ordenamiento -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
      <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
        <!-- Filtro de prioridad -->
        <div class="flex items-center gap-2">
          <label class="text-sm font-medium text-gray-700">Prioridad:</label>
          <select
            [(ngModel)]="priorityFilter"
            (change)="onPriorityFilterChange(priorityFilter)"
            class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="all">Todas</option>
            <option value="low">Baja</option>
            <option value="medium">Media</option>
            <option value="high">Alta</option>
          </select>
        </div>

        <!-- Ordenamiento -->
        <div class="flex items-center gap-2">
          <label class="text-sm font-medium text-gray-700">Ordenar por:</label>
          <select
            [(ngModel)]="sortBy"
            (change)="onSortChange(sortBy)"
            class="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option value="none">Sin ordenar</option>
            <option value="dueDate">Fecha de vencimiento</option>
            <option value="priority">Prioridad</option>
          </select>
          <button
            *ngIf="sortBy !== 'none'"
            (click)="toggleSortOrder()"
            class="px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"
            [attr.aria-label]="sortOrder === 'asc' ? 'Orden ascendente' : 'Orden descendente'"
          >
            {{ sortOrder === 'asc' ? '↑' : '↓' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Columnas de tareas -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Pendientes -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
          <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
          Pendientes ({{ pendingTasks.length }})
        </h2>
        <div class="space-y-4">
          <app-task-card
            *ngFor="let task of pendingTasks"
            [task]="task"
            (edit)="onTaskEdit($event)"
            (delete)="onTaskDelete($event)"
          ></app-task-card>
          <p *ngIf="pendingTasks.length === 0" class="text-gray-500 text-center py-8">
            No hay tareas pendientes
          </p>
        </div>
      </div>

      <!-- En progreso -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
          <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
          En Progreso ({{ inProgressTasks.length }})
        </h2>
        <div class="space-y-4">
          <app-task-card
            *ngFor="let task of inProgressTasks"
            [task]="task"
            (edit)="onTaskEdit($event)"
            (delete)="onTaskDelete($event)"
          ></app-task-card>
          <p *ngIf="inProgressTasks.length === 0" class="text-gray-500 text-center py-8">
            No hay tareas en progreso
          </p>
        </div>
      </div>

      <!-- Completadas -->
      <div class="bg-white rounded-lg shadow-md p-4">
        <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
          <span class="w-3 h-3 bg-green-500 rounded-full"></span>
          Completadas ({{ completedTasks.length }})
        </h2>
        <div class="space-y-4">
          <app-task-card
            *ngFor="let task of completedTasks"
            [task]="task"
            (edit)="onTaskEdit($event)"
            (delete)="onTaskDelete($event)"
          ></app-task-card>
          <p *ngIf="completedTasks.length === 0" class="text-gray-500 text-center py-8">
            No hay tareas completadas
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Formulario de tarea -->
  <app-task-form
    [task]="taskToEdit"
    [show]="showTaskForm"
    (save)="onTaskSave($event)"
    (cancel)="onTaskFormCancel()"
  ></app-task-form>

  <!-- Diálogo de confirmación -->
  <app-confirm-dialog
    title="Eliminar Tarea"
    message="¿Estás seguro de que deseas eliminar esta tarea? Esta acción no se puede deshacer."
    confirmText="Eliminar"
    cancelText="Cancelar"
    [show]="showConfirmDialog"
    (confirm)="onConfirmDelete()"
    (cancel)="onCancelDelete()"
  ></app-confirm-dialog>
</div>

